/* See the Tailwind configuration guide for advanced usage
   https://tailwindcss.com/docs/configuration */

@import "tailwindcss" source(none);
@source "../css";
@source "../js";
@source "../../lib/game_eight_web";

/* A Tailwind plugin that makes "hero-#{ICON}" classes available.
   The heroicons installation itself is managed by your mix.exs */
@plugin "../vendor/heroicons";

/* daisyUI Tailwind Plugin. You can update this file by fetching the latest version with:
   curl -sLO https://github.com/saadeghi/daisyui/releases/latest/download/daisyui.js
   Make sure to look at the daisyUI changelog: https://daisyui.com/docs/changelog/ */
@plugin "../vendor/daisyui" {
  themes: false;
}

/* daisyUI theme plugin. You can update this file by fetching the latest version with:
  curl -sLO https://github.com/saadeghi/daisyui/releases/latest/download/daisyui-theme.js
  We ship with two themes, a light one inspired on Phoenix colors and a dark one inspired
  on Elixir colors. Build your own at: https://daisyui.com/theme-generator/ */
@plugin "../vendor/daisyui-theme" {
  name: "dark";
  default: false;
  prefersdark: true;
  color-scheme: "dark";
  --color-base-100: oklch(30.33% 0.016 252.42);
  --color-base-200: oklch(25.26% 0.014 253.1);
  --color-base-300: oklch(20.15% 0.012 254.09);
  --color-base-content: oklch(97.807% 0.029 256.847);
  --color-primary: oklch(58% 0.233 277.117);
  --color-primary-content: oklch(96% 0.018 272.314);
  --color-secondary: oklch(58% 0.233 277.117);
  --color-secondary-content: oklch(96% 0.018 272.314);
  --color-accent: oklch(60% 0.25 292.717);
  --color-accent-content: oklch(96% 0.016 293.756);
  --color-neutral: oklch(37% 0.044 257.287);
  --color-neutral-content: oklch(98% 0.003 247.858);
  --color-info: oklch(58% 0.158 241.966);
  --color-info-content: oklch(97% 0.013 236.62);
  --color-success: oklch(60% 0.118 184.704);
  --color-success-content: oklch(98% 0.014 180.72);
  --color-warning: oklch(66% 0.179 58.318);
  --color-warning-content: oklch(98% 0.022 95.277);
  --color-error: oklch(58% 0.253 17.585);
  --color-error-content: oklch(96% 0.015 12.422);
  --radius-selector: 0.25rem;
  --radius-field: 0.25rem;
  --radius-box: 0.5rem;
  --size-selector: 0.21875rem;
  --size-field: 0.21875rem;
  --border: 1.5px;
  --depth: 1;
  --noise: 0;
}

@plugin "../vendor/daisyui-theme" {
  name: "light";
  default: true;
  prefersdark: false;
  color-scheme: "light";
  --color-base-100: oklch(98% 0 0);
  --color-base-200: oklch(96% 0.001 286.375);
  --color-base-300: oklch(92% 0.004 286.32);
  --color-base-content: oklch(21% 0.006 285.885);
  --color-primary: oklch(70% 0.213 47.604);
  --color-primary-content: oklch(98% 0.016 73.684);
  --color-secondary: oklch(55% 0.027 264.364);
  --color-secondary-content: oklch(98% 0.002 247.839);
  --color-accent: oklch(0% 0 0);
  --color-accent-content: oklch(100% 0 0);
  --color-neutral: oklch(44% 0.017 285.786);
  --color-neutral-content: oklch(98% 0 0);
  --color-info: oklch(62% 0.214 259.815);
  --color-info-content: oklch(97% 0.014 254.604);
  --color-success: oklch(70% 0.14 182.503);
  --color-success-content: oklch(98% 0.014 180.72);
  --color-warning: oklch(66% 0.179 58.318);
  --color-warning-content: oklch(98% 0.022 95.277);
  --color-error: oklch(58% 0.253 17.585);
  --color-error-content: oklch(96% 0.015 12.422);
  --radius-selector: 0.25rem;
  --radius-field: 0.25rem;
  --radius-box: 0.5rem;
  --size-selector: 0.21875rem;
  --size-field: 0.21875rem;
  --border: 1.5px;
  --depth: 1;
  --noise: 0;
}

/* Add variants based on LiveView classes */
@custom-variant phx-click-loading (.phx-click-loading&, .phx-click-loading &);
@custom-variant phx-submit-loading (.phx-submit-loading&, .phx-submit-loading &);
@custom-variant phx-change-loading (.phx-change-loading&, .phx-change-loading &);

/* Use the data attribute for dark mode  */
@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

/* Make LiveView wrapper divs transparent for layout */
[data-phx-session], [data-phx-teleported-src] { display: contents }

/* This file is for your main application CSS */

/* ================================= */
/* GAME CARD STYLES */
/* ================================= */

/* Base card styles */
.game-card {
  @apply relative bg-white border-2 border-gray-300 rounded-lg shadow-md;
  @apply flex flex-col items-center justify-between p-2;
  @apply w-16 h-20 cursor-pointer select-none;
  @apply transition-all duration-200 ease-in-out;
  @apply hover:shadow-lg hover:border-gray-400 hover:-translate-y-1;
}

/* Card content positioning */
.game-card .card-value {
  @apply text-sm font-bold leading-none;
}

.game-card .card-suit {
  @apply text-lg leading-none;
}

/* Deck color variants */
.game-card.deck-red {
  @apply bg-red-50 border-red-300;
}

.game-card.deck-blue {
  @apply bg-blue-50 border-blue-300;
}

/* Suit color variants */
.game-card.suit-hearts,
.game-card.suit-diamonds {
  @apply text-red-600;
}

.game-card.suit-spades,
.game-card.suit-clubs {
  @apply text-gray-800;
}

.game-card.suit-unknown {
  @apply text-gray-500 border-dashed opacity-75;
}

/* Card state variants */
.game-card.selected {
  @apply ring-2 ring-blue-500 border-blue-500 bg-blue-100;
  @apply transform -translate-y-2;
}

.game-card.dragging {
  @apply opacity-75 transform rotate-3 scale-105;
  @apply z-50 shadow-2xl;
}

.game-card.drag-over {
  @apply ring-2 ring-green-500 border-green-500 bg-green-100;
}

/* Drop zones */
.drop-zone {
  @apply border-2 border-dashed border-gray-300 rounded-lg p-4;
  @apply transition-all duration-200;
  @apply min-h-24 flex items-center justify-center;
}

.drop-zone.active {
  @apply border-blue-500 bg-blue-50;
}

.drop-zone.valid-drop {
  @apply border-green-500 bg-green-50;
}

.drop-zone.invalid-drop {
  @apply border-red-500 bg-red-50;
}

/* Hand container */
.player-hand {
  @apply flex gap-2 p-4 bg-gray-100 rounded-lg min-h-28;
  @apply items-center justify-center flex-wrap;
}

/* Table combinations */
.table-combinations {
  @apply grid gap-4 p-6 bg-green-100 rounded-lg min-h-48;
  @apply items-start justify-center;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
}

.combination {
  @apply flex gap-1 p-3 bg-white rounded-lg shadow-sm border;
  @apply min-h-24 items-center justify-center;
}

.combination.trio {
  @apply border-orange-300 bg-orange-50;
}

.combination.sequence {
  @apply border-purple-300 bg-purple-50;
}

/* Deck pile */
.deck-pile {
  @apply relative w-16 h-20 cursor-pointer;
}

.deck-pile .deck-card {
  @apply absolute bg-gray-200 border border-gray-400 rounded-lg;
  @apply w-full h-full shadow-sm;
}

.deck-pile .deck-card:nth-child(1) {
  @apply transform translate-x-0 translate-y-0;
}

.deck-pile .deck-card:nth-child(2) {
  @apply transform translate-x-0.5 translate-y-0.5;
}

.deck-pile .deck-card:nth-child(3) {
  @apply transform translate-x-1 translate-y-1;
}

/* Game interface layout */
.game-interface {
  @apply grid grid-rows-3 h-screen gap-4 p-4;
  grid-template-rows: 1fr 2fr 1fr;
}

.opponents-area {
  @apply flex justify-around items-start;
}

.table-area {
  @apply flex flex-col items-center justify-center;
}

.player-area {
  @apply flex flex-col items-center gap-4;
}

/* Turn indicator */
.turn-indicator {
  @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
}

.turn-indicator.active {
  @apply bg-green-100 text-green-800 ring-2 ring-green-500;
}

.turn-indicator.inactive {
  @apply bg-gray-100 text-gray-600;
}

/* Player status */
.player-status.player-on {
  @apply text-green-600 font-semibold;
}

.player-status.player-off {
  @apply text-gray-500;
}

/* Animation classes */
.card-deal {
  animation: deal-card 0.5s ease-out;
}

@keyframes deal-card {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.8);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.card-played {
  animation: play-card 0.8s ease-out;
}

@keyframes play-card {
  0% {
    transform: translateY(0) scale(1);
  }
  50% {
    transform: translateY(-30px) scale(1.1);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}

/* Drag and Drop Styles */
.game-card {
  @apply cursor-move transition-all duration-200;
}

.game-card.dragging {
  @apply opacity-60 scale-95 z-50;
  transform: rotate(5deg);
}

.game-card.touch-dragging {
  @apply opacity-80 shadow-2xl;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
}

/* Drop zones */
.hand-drop-zone {
  @apply w-2 h-20 bg-transparent border-2 border-dashed border-transparent transition-all duration-200;
  min-width: 8px;
}

.hand-drop-zone.valid-drop {
  @apply border-green-400 bg-green-100;
  opacity: 0.4;
}

.hand-drop-zone.invalid-drop {
  @apply border-red-400 bg-red-100;
  opacity: 0.4;
}

.hand-drop-zone.touch-drag-over {
  @apply border-blue-400 bg-blue-100;
  opacity: 0.6;
}

/* New: Drop zone hints during drag */
.hand-drop-zone.valid-drop-hint {
  @apply border-green-300 bg-green-50;
  opacity: 0.8;
  animation: pulse-valid 1.5s infinite;
}

.hand-drop-zone.invalid-drop-hint {
  @apply border-gray-300 bg-gray-50;
  opacity: 0.4;
}

@keyframes pulse-valid {
  0%, 100% {
    opacity: 0.4;
    transform: scaleX(1);
  }
  50% {
    opacity: 0.8;
    transform: scaleX(1.2);
  }
}

/* Hand area drop zone for table cards */
#player-hand-area.valid-drop {
  @apply ring-4 ring-green-400 bg-green-600;
  ring-opacity: 0.5;
}

#player-hand-area.invalid-drop {
  @apply ring-4 ring-red-400 bg-red-600;
  ring-opacity: 0.5;
}

#player-hand-area.touch-drag-over {
  @apply ring-4 ring-blue-400 bg-blue-600;
  ring-opacity: 0.5;
}

/* Table cards drag states */
.table-combinations .game-card:hover {
  @apply scale-105 shadow-lg;
}

.table-combinations .game-card.dragging {
  @apply opacity-50;
}

/* Visual feedback for valid/invalid table card taking */
.combination-container.can-take-card {
  @apply ring-2 ring-green-400;
  ring-opacity: 0.5;
}

.combination-container.cannot-take-card {
  @apply ring-2 ring-red-400;
  ring-opacity: 0.5;
}

.combination-container.can-take-card .game-card {
  @apply cursor-grab;
}

.combination-container.cannot-take-card .game-card {
  @apply cursor-not-allowed opacity-75;
}

.combination-container.can-take-card .game-card:hover {
  @apply transform scale-105 shadow-lg;
}

/* Animations */
@keyframes pulse-drag {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.game-card.drag-hover {
  animation: pulse-drag 1s infinite;
}

/* Mobile touch feedback */
@media (max-width: 768px) {
  .game-card.touch-dragging {
    @apply transform-gpu;
    will-change: transform;
  }

  .hand-drop-zone {
    @apply w-4 h-16;
    min-width: 16px;
  }
}

/* Mobile responsiveness */
@media (max-width: 768px) {
  .game-card {
    @apply w-12 h-16 p-1;
  }

  .game-card .card-value {
    @apply text-xs;
  }

  .game-card .card-suit {
    @apply text-sm;
  }

  .player-hand {
    @apply gap-1 p-2;
  }

  .combination {
    @apply gap-0.5 p-2;
  }

  /* Larger touch targets for mobile */
  .hand-drop-zone {
    @apply w-6 h-16;
    min-width: 24px;
  }

  /* Better touch feedback */
  .game-card.touch-dragging {
    @apply transform scale-110 shadow-2xl;
  }

  /* Ensure cards are easier to tap on mobile */
  .game-card {
    min-width: 48px;
    min-height: 64px;
  }
}
